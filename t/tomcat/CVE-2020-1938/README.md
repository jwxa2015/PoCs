# CVE-2020-1938

## 描述
该漏洞是由于Tomcat AJP协议存在缺陷而导致，攻击者利用该漏洞可通过构造特定参数，读取服务器webapp下的任意文件。若目标服务器同时存在文件上传功能，攻击者可进一步实现远程代码执行。

## 受影响版本

* Apache Tomcat 6
* Apache Tomcat 7 < 7.0.100
* Apache Tomcat 8 < 8.5.51
* Apache Tomcat 9 < 9.0.31
## 不受影响版本
* Apache Tomcat = 7.0.100
* Apache Tomcat = 8.5.51
* Apache Tomcat = 9.0.31

## POC
1. [CNVD-2020-10487-Tomcat-Ajp-lfi](https://github.com/YDHCUI/CNVD-2020-10487-Tomcat-Ajp-lfi)


## 修复方案
临时禁用AJP协议端口，在conf/server.xm l配置文件中注释掉<Connector port="8009" protocol="AJP/1.3"redirectPort="8443" />

配置ajp配置中的secretRequired跟secret属性来限制认证

官方下载最新版下载地址：

https://tomcat.apache.org/download-70.cgi
https://tomcat.apache.org/download-80.cgi
https://tomcat.apache.org/download-90.cgi
https://github.com/apache/tomcat/releases

## 参考
* [Fixed in Apache Tomcat 8.5.51](https://tomcat.apache.org/security-8.html#Fixed_in_Apache_Tomcat_8.5.51)
* [【威胁通告】Apache Tomcat 文件包含漏洞（CVE-2020-1938）](http://blog.nsfocus.net/cve-2020-1938/)